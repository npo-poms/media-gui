<div class="modal-header">
  <div class="modal-title"> {{ prediction.platform.text }} ({{ prediction.platform.id }})</div>
  <div class="modal-close-button" ng-click="controller.cancel()"> close </div>
</div>

<form role="form" class="poms-form editPredictionForm" ng-class="{'waiting': waiting}" name="editPredictionForm" >

  <div class="modal-body">

    <div>

      <div class="modal-column">
        <div class="row">
          <div class="col-6 field">
            <label for="available">Beschikbaar</label>
            <input type="checkbox"
                   name="plannedAvailability" id="available"
                   ng-disabled="! prediction.mayWrite"
                   ng-model="prediction.plannedAvailability"
            />
          </div>

          <div class="col-6 field" >
              <label label-for="encryption">Encryptie</label>
              <ui-select id="encryption"
                         ng-model="prediction.encryption"
                         ng-disabled="! prediction.mayWrite || ! prediction.encryptionIsPossible"
                         theme="selectize"
                         close-on-select="true" reset-search-input="true" style="width: 200px;">
                <ui-select-choices repeat="item in encryptionTypes | filter: {text: $select.search}">
                  <div ng-bind-html="item.text | highlight: $select.search"></div>
                </ui-select-choices>
                <ui-select-match>{{$select.selected.text }}</ui-select-match>
              </ui-select>
            </div>
          <div dropdown class="dropdown-wrapper col-6 field">
                  <span class="dropdown-toggle" dropdown-toggle > Publicatie start/stop </span>

                  <div dropdown-menu class="daterange-select"  daterangepicker >
                    <div class="input-group datepicker-dropdown"  >
                      <label class='date-input-label' label-for="fromdate" >Start</label>
                      <input name='fromdate' type="text" class="form-control"
                             ng-disabled="! prediction.mayWriteEmbargo"
                             datepicker-popup="dd-MM-yyyy HH:mm"
                             max-date='maxStart'
                             ng-model="prediction.ownPublication.start"
                             is-open="startdate.open"
                             close-text="sluit"
                             ng-click="$event.preventDefault(); $event.stopPropagation();"
                             ng-change="setMinStop(prediction.ownPublication.start); prediction.publication.start = prediction.ownPublication.start"/> <!-- avoid effectieve publicatie -->

                      <button class="open-calendar" ng-click="openStartDate($event)"></button>
                    </div>

                    <div class="input-group datepicker-dropdown"  >
                      <label class='date-input-label' label-for="todate" >Stop</label>

                      <input name='todate' type="text" class="form-control"
                             ng-disabled="! prediction.mayWrite"
                             datepicker-popup="dd-MM-yyyy HH:mm"
                             min-date='minStop'
                             ng-model="prediction.ownPublication.stop"
                             is-open="stopdate.open"
                             close-text="sluit"
                             ng-click="$event.preventDefault(); $event.stopPropagation();"
                             ng-change="setMaxStart(prediction.ownPublication.stop); prediction.publication.stop = prediction.ownPublication.stop"/>

                      <button class="open-calendar" ng-click="openStopDate($event)"></button>
                    </div>
                  </div>

                  <a title="verwijder" class="dropdown-selected " ng-if="prediction.ownPublication.start" ng-click="prediction.ownPublication.start = undefined">
                    start: <span> {{prediction.ownPublication.start | mediaDateTime}} </span>
                  </a>

                  <a title="verwijder" class="dropdown-selected " ng-if="prediction.ownPublication.stop" ng-click="prediction.ownPublication.stop = undefined">
                    stop: <span> {{prediction.ownPublication.stop | mediaDateTime}} </span>
                  </a>
          </div>
           <div dropdown class="col-6 dropdown-wrapper">
             <div ng-if="(prediction.ownPublication.start != prediction.publication.start) || (prediction.ownPublication.stop != prediction.publication.stop)">
               <div>Effectieve publicatie</div>
               <p>Wegens de bronnen zijn de effectieve data van dit platform anders</p>
               <span ng-if="prediction.ownPublication.start != prediction.publication.start">
                 start: <span> {{prediction.publication.start | mediaDateTime}} </span>
               </span>
              <span ng-if="prediction.ownPublication.stop != prediction.publication.stop">
                stop: <span> {{prediction.publication.stop | mediaDateTime}} </span>
              </span>
             </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="modal-disable-overlay"></div>

  </div>

  <div class="footer-container">
    <div class="footer modal-footer footer-two-buttons">
      <button class="btn-rect" ng-click="controller.save($scope.prediction)" ng-disabled="waiting">Sla op</button>
      <button class="btn-rect btn-rect-cancel" ng-click="controller.cancel($event)">Annuleer</button>

    </div>
  </div>

</form>
