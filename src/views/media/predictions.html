<div  ng-if="media.mayHaveLocations" id="{{section}}" ng-controller="PredictionsController as predictionsController" class="media-data media-locations media-section">

    <h1 class="media-section-title" ng-class="{ 'waiting': predictionsController.waiting }">Platformen ({{predictionsController.predictions.length}})
        <poms-help field="editor.predictions"></poms-help>
    </h1>

    <table class="poms-table poms-table-locations"
           ng-show="predictionsController.predictions.length > 0"
           ng-class="{ 'updating': predictionsController.predictionsWaiting }">

        <thead>

        <tr class="poms-table-head-row">
            <!--<th class="poms-table-header column-play" > </th>-->

            <th class="poms-table-header column-{{::column.id}}" ng-repeat="column in selectedColumns">
                <span title="{{column.value}}">
                     {{ column.tableValue || (column.tableValue == '' ? '' : column.value) }}
                </span>
            </th>

            <th class="poms-table-header column-tools" >
                <poms-prediction-columns> </poms-prediction-columns>
            </th>
        </tr>

        </thead>

        <tbody>
        <tr class="poms-table-row"
            ng-repeat="prediction in predictionsController.predictions"
            ng-class="{'waiting': predictionsController.predictionsWaiting, 'may-write': prediction.mayWrite || prediction.mayWriteEmbargo}"
            ng-dblclick="predictionsController.editPrediction(prediction)"
        >
            <td class="column-{{::column.id}}" ng-repeat="column in selectedColumns " ng-switch on="column.id">
                <span title="{{::prediction.platform.text}}" ng-switch-when="platform" >
                  {{::prediction.platform.id}}
                </span>

                <span title="{{::prediction.plannedAvailability}}" ng-switch-when="plannedAvailability" >
                     {{::prediction.plannedAvailability ? 'beschikbaar' : 'niet beschikbaar'}}
                  <span ng-if="::prediction.plannedAvailability" ng-switch="::prediction.encryption.id">
                    <span ng-switch-when="DRM">met DRM</span>
                    <span ng-switch-when="NONE">zonder DRM</span>
                    <span ng-switch-default>met of zonder DRM</span>
                  </span>
                </span>
               <span title="{{::prediction.state}}" ng-switch-when="state" >
                     {{::prediction.state.text }}
               </span>

                <span title="{{ ::prediction.publication.start |  mediaDate }} - {{ ::prediction.publication.stop |  mediaDate }}" ng-switch-when="dates" >
                  <span ng-if="::prediction.plannedAvailability">
                    <span ng-if="::prediction.publication.start">van:  {{ ::prediction.publication.start |  mediaDateTime }}</span>
                    <span ng-if="::prediction.publication.stop"> tot:  {{ ::prediction.publication.stop |  mediaDateTime }}</span>
                  </span>
                </span>

                <span title="{{::prediction.authority}}" ng-switch-when="authority" >
                       {{::prediction.authority}}
                   </span>
            </td>

            <td class="column-tools">
                <div>
                    <div class="tools" >
                        <button ng-if="prediction.mayWrite || prediction.mayWriteEmbargo"
                                title='edit bron' class="poms-icon icon-edit"
                                ng-click="predictionsController.editPrediction(prediction)">bewerk</button>
                    </div>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
